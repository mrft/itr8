<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>itr8</title><meta name="description" content="Documentation for itr8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script><link rel="stylesheet" href="assets/pages.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">itr8</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>itr8</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#itr8-pronounced-quotiteratequot" id="itr8-pronounced-quotiteratequot" style="color: inherit; text-decoration: none;">
  <h1>itr8 (pronounced &quot;iterate&quot;)</h1>
</a>
<p><a href="https://github.com/mrft/itr8/actions/workflows/node.js.yml"><img src="https://github.com/mrft/itr8/actions/workflows/node.js.yml/badge.svg" alt="Node.js CI"></a></p>
<blockquote>
<p><strong><em>&quot;because programming should not be about solving the same problems over and over again&quot;</em></strong></p>
</blockquote>
<p><strong>Installation</strong></p>
<pre><code class="language-bash"><span class="hl-0">    </span><span class="hl-1"># install from npmjs.com</span><br/><span class="hl-0">    </span><span class="hl-2">npm</span><span class="hl-0"> </span><span class="hl-3">install</span><span class="hl-0"> </span><span class="hl-3">itr8</span><br/><span class="hl-0">    </span><span class="hl-1"># install directly from github</span><br/><span class="hl-0">    </span><span class="hl-2">npm</span><span class="hl-0"> </span><span class="hl-3">install</span><span class="hl-0"> </span><span class="hl-3">mrft/itr8</span>
</code></pre>
<p><strong>Usage in NodeJS or with bundlers</strong></p>
<pre><code class="language-typescript"><span class="hl-1">// in an EcmaScript module - ESM</span><br/><span class="hl-4">import</span><span class="hl-0"> { </span><span class="hl-5">pipe</span><span class="hl-0">, </span><span class="hl-5">itr8Range</span><span class="hl-0">, </span><span class="hl-5">forEach</span><span class="hl-0">, </span><span class="hl-5">filter</span><span class="hl-0">, </span><span class="hl-5">map</span><span class="hl-0"> } </span><span class="hl-4">from</span><span class="hl-0"> </span><span class="hl-3">&quot;itr8&quot;</span><span class="hl-0">;</span><br/><span class="hl-1">// in a CommonJS module - CJS</span><br/><span class="hl-6">const</span><span class="hl-0"> { </span><span class="hl-7">pipe</span><span class="hl-0">, </span><span class="hl-7">itr8Range</span><span class="hl-0">, </span><span class="hl-7">forEach</span><span class="hl-0">, </span><span class="hl-7">filter</span><span class="hl-0">, </span><span class="hl-7">map</span><span class="hl-0"> } = </span><span class="hl-2">require</span><span class="hl-0">(</span><span class="hl-3">&quot;itr8/cjs&quot;</span><span class="hl-0">);</span>
</code></pre>
<p><strong>Usage in the browser</strong></p>
<pre><code class="language-html"><span class="hl-8">&lt;</span><span class="hl-9">script</span><span class="hl-10"> </span><span class="hl-11">type</span><span class="hl-10">=</span><span class="hl-12">&quot;module&quot;</span><span class="hl-8">&gt;</span><br/><span class="hl-10">  </span><span class="hl-4">import</span><span class="hl-10"> {</span><br/><span class="hl-10">    </span><span class="hl-5">pipe</span><span class="hl-10">,</span><br/><span class="hl-10">    </span><span class="hl-5">itr8Range</span><span class="hl-10">,</span><br/><span class="hl-10">    </span><span class="hl-5">forEach</span><span class="hl-10">,</span><br/><span class="hl-10">    </span><span class="hl-5">filter</span><span class="hl-10">,</span><br/><span class="hl-10">    </span><span class="hl-5">map</span><span class="hl-10">,</span><br/><span class="hl-10">  } </span><span class="hl-4">from</span><span class="hl-10"> </span><span class="hl-3">&quot;https://cdn.jsdelivr.net/npm/itr8@latest&quot;</span><span class="hl-10">;</span><br/><span class="hl-10">  </span><span class="hl-1">// or &quot;https://cdn.skypack.dev/itr8@latest&quot; or &quot;https://unpkg.com/itr8@latest&quot;</span><br/><br/><span class="hl-10">  </span><span class="hl-1">// or use the minified bundle: &quot;https://&lt;some-cdn&gt;/itr8@latest/itr8.min.js&quot;</span><br/><span class="hl-10">  </span><span class="hl-4">import</span><span class="hl-10"> {</span><br/><span class="hl-10">    </span><span class="hl-5">pipe</span><span class="hl-10">,</span><br/><span class="hl-10">    </span><span class="hl-5">itr8Range</span><span class="hl-10">,</span><br/><span class="hl-10">    </span><span class="hl-5">forEach</span><span class="hl-10">,</span><br/><span class="hl-10">    </span><span class="hl-5">filter</span><span class="hl-10">,</span><br/><span class="hl-10">    </span><span class="hl-5">map</span><span class="hl-10">,</span><br/><span class="hl-10">  } </span><span class="hl-4">from</span><span class="hl-10"> </span><span class="hl-3">&quot;https://cdn.jsdelivr.net/npm/itr8@latest/itr8.min.js&quot;</span><span class="hl-10">;</span><br/><span class="hl-8">&lt;/</span><span class="hl-9">script</span><span class="hl-8">&gt;</span>
</code></pre>
<p><strong><a href="https://github.com/mrft/itr8">itr8 source code</a></strong> can be found on github</p>
<p><strong><a href="https://mrft.github.io/itr8">full itr8 documentation</a></strong> can be found at the itr8 github site.</p>
<p><strong>Table of Contents</strong></p>
<ul>
<li><a href="#itr8-pronounced-iterate">itr8</a><ul>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#what-is-itr8">What is it</a></li>
<li><a href="#who-is-this-library-for">Who is this library for</a></li>
<li><a href="#roadmap">Roadmap</a></li>
</ul>
</li>
<li><a href="#documentation">Documentation</a><ul>
<li><a href="#api-documentation">API documentation</a></li>
<li><a href="#what-is-a-transiterator">What is a transIterator?</a></li>
<li><a href="#writing-your-own-operators">Writing your own operators</a></li>
</ul>
</li>
<li><a href="#inspiration">Inspiration</a></li>
</ul>

<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
  <h2>Getting started</h2>
</a>
<pre><code class="language-typescript"><span class="hl-4">import</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">// interface</span><br/><span class="hl-0">  </span><span class="hl-5">itr8FromIterable</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-5">itr8Range</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-5">itr8ToArray</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-5">forEach</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-1">// operators</span><br/><span class="hl-0">  </span><span class="hl-5">map</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-5">filter</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-5">skip</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-5">take</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-5">lineByLine</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-1">// utils</span><br/><span class="hl-0">  </span><span class="hl-5">pipe</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-5">compose</span><span class="hl-0">,</span><br/><span class="hl-0">} </span><span class="hl-4">from</span><span class="hl-0"> </span><span class="hl-3">&quot;itr8&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-7">inputArray</span><span class="hl-0"> = [</span><br/><span class="hl-0">  </span><span class="hl-13">1</span><span class="hl-0">, </span><span class="hl-13">2</span><span class="hl-0">, </span><span class="hl-13">3</span><span class="hl-0">, </span><span class="hl-13">4</span><span class="hl-0">, </span><span class="hl-13">5</span><span class="hl-0">, </span><span class="hl-13">6</span><span class="hl-0">, </span><span class="hl-13">7</span><span class="hl-0">, </span><span class="hl-13">8</span><span class="hl-0">, </span><span class="hl-13">9</span><span class="hl-0">, </span><span class="hl-13">10</span><span class="hl-0">, </span><span class="hl-13">11</span><span class="hl-0">, </span><span class="hl-13">12</span><span class="hl-0">, </span><span class="hl-13">13</span><span class="hl-0">, </span><span class="hl-13">14</span><span class="hl-0">, </span><span class="hl-13">15</span><span class="hl-0">, </span><span class="hl-13">16</span><span class="hl-0">, </span><span class="hl-13">17</span><span class="hl-0">, </span><span class="hl-13">18</span><span class="hl-0">, </span><span class="hl-13">19</span><span class="hl-0">, </span><span class="hl-13">20</span><span class="hl-0">,</span><br/><span class="hl-0">];</span><br/><br/><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-7">resultArray</span><span class="hl-0"> = </span><span class="hl-2">pipe</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-2">itr8FromIterable</span><span class="hl-0">(</span><span class="hl-5">inputArray</span><span class="hl-0">), </span><span class="hl-1">// the input iterator (= inputArray[Symbol.iterator]())</span><br/><span class="hl-0">  </span><span class="hl-2">map</span><span class="hl-0">((</span><span class="hl-5">x</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-5">x</span><span class="hl-0"> * </span><span class="hl-13">2</span><span class="hl-0">), </span><span class="hl-1">// =&gt; 2 4 6 8 10 12 14 16 ... [34 36 38 ...]</span><br/><span class="hl-0">  </span><span class="hl-2">filter</span><span class="hl-0">((</span><span class="hl-5">x</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-5">x</span><span class="hl-0"> % </span><span class="hl-13">3</span><span class="hl-0"> === </span><span class="hl-13">0</span><span class="hl-0">), </span><span class="hl-1">// =&gt; 6 12 18 24 30 [36 42 ...]</span><br/><span class="hl-0">  </span><span class="hl-2">skip</span><span class="hl-0">(</span><span class="hl-13">2</span><span class="hl-0">), </span><span class="hl-1">// =&gt; 18 24 30 [36 42 ...]</span><br/><span class="hl-0">  </span><span class="hl-2">take</span><span class="hl-0">(</span><span class="hl-13">3</span><span class="hl-0">), </span><span class="hl-1">// =&gt; 18 24 30</span><br/><span class="hl-0">  </span><span class="hl-5">itr8ToArray</span><span class="hl-0">,</span><br/><span class="hl-0">);</span><br/><span class="hl-1">// 1) you should be aware that the values between square brackets will never actually be calculated</span><br/><span class="hl-1">//    because only as many elements as needed will be pulled from the iterator!</span><br/><span class="hl-1">//    (If you&#39;d have written the same with array.filter, array.map etc. you&#39;d have created</span><br/><span class="hl-1">//    many &#39;intermediate arrays&#39; - using more memory - and the calculations would have been</span><br/><span class="hl-1">//    executed needlessly for all elements in the array)</span><br/><span class="hl-1">// 2) you should also be aware that if &#39;itr8ToArray&#39; was not there, nothing would have happened!</span><br/><span class="hl-1">//    only when you start doing next() calls on the iterator something would actually be executed</span><br/><span class="hl-1">// 3) due to the current lack of a pipe operator in JS we are using a pipe function so we can</span><br/><span class="hl-1">//    read from left to right (or top to bottom), instead of right to left when applying functions</span><br/><span class="hl-1">//    to the rsult of the previous function.</span><br/><span class="hl-1">// 4) this pipe function can be used for any function, as long as they expect one argument each,</span><br/><span class="hl-1">//    and as long as the output of the current matches the expected input of the next</span><br/><br/><span class="hl-1">// Now assume you need to apply the same algorithm to an asynchronous source (like a file or an api).</span><br/><span class="hl-1">// In plain javascript you&#39;d have to eiter load the entire file into an array (which could be</span><br/><span class="hl-1">// problematic for large files), or rewrite your algorithm (which would typically have used</span><br/><span class="hl-1">// array.map, array.filter) with other tools that help you with asynchronous code.</span><br/><span class="hl-1">// But with itr8 that would simply become (assuming one number per line).</span><br/><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-7">resultArray2</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-2">pipe</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-2">itr8FromIterable</span><span class="hl-0">(</span><span class="hl-2">createReadStream</span><span class="hl-0">(</span><span class="hl-3">&quot;test.js&quot;</span><span class="hl-0">, </span><span class="hl-3">&quot;utf8&quot;</span><span class="hl-0">)), </span><span class="hl-1">// readable streams are async iterables!</span><br/><span class="hl-0">  </span><span class="hl-2">lineByLine</span><span class="hl-0">(), </span><span class="hl-1">// interpret each line in the file as a single element</span><br/><span class="hl-0">  </span><span class="hl-2">map</span><span class="hl-0">(</span><span class="hl-5">Number</span><span class="hl-0">.</span><span class="hl-5">parseFloat</span><span class="hl-0">), </span><span class="hl-1">// turn the text into a number</span><br/><br/><span class="hl-0">  </span><span class="hl-2">map</span><span class="hl-0">((</span><span class="hl-5">x</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-5">x</span><span class="hl-0"> * </span><span class="hl-13">2</span><span class="hl-0">), </span><span class="hl-1">// =&gt; 2 4 6 8 10 12 14 16 ... [34 36 38 ...]</span><br/><span class="hl-0">  </span><span class="hl-2">filter</span><span class="hl-0">((</span><span class="hl-5">x</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-5">x</span><span class="hl-0"> % </span><span class="hl-13">3</span><span class="hl-0"> === </span><span class="hl-13">0</span><span class="hl-0">), </span><span class="hl-1">// =&gt; 6 12 18 24 30 [36 42 ...]</span><br/><span class="hl-0">  </span><span class="hl-2">skip</span><span class="hl-0">(</span><span class="hl-13">2</span><span class="hl-0">), </span><span class="hl-1">// =&gt; 18 24 30 [36 42 ...]</span><br/><span class="hl-0">  </span><span class="hl-2">take</span><span class="hl-0">(</span><span class="hl-13">3</span><span class="hl-0">), </span><span class="hl-1">// =&gt; 18 24 30</span><br/><span class="hl-0">  </span><span class="hl-5">itr8ToArray</span><span class="hl-0">,</span><br/><span class="hl-0">);</span><br/><span class="hl-1">// as you can see the actual algorithm did not change at all, we just had to &#39;await&#39; the result</span><br/><span class="hl-1">// because we are now using an asynchronous iterator as input!!!</span><br/><br/><span class="hl-1">// But we&#39;d want to be able to reuse that algorithm, so it would be nice if we can store it as a</span><br/><span class="hl-1">// function and apply it when needed.</span><br/><span class="hl-1">// This is where the &#39;compose&#39; function comes in handy.</span><br/><span class="hl-1">// It will help you to easily create new &#39;operators&#39; by combining existing operators.</span><br/><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-2">myOperator</span><span class="hl-0"> = () </span><span class="hl-6">=&gt;</span><br/><span class="hl-0">  </span><span class="hl-2">compose</span><span class="hl-0">(</span><br/><span class="hl-0">    </span><span class="hl-2">map</span><span class="hl-0">((</span><span class="hl-5">x</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-5">x</span><span class="hl-0"> * </span><span class="hl-13">2</span><span class="hl-0">), </span><span class="hl-1">// =&gt; 2 4 6 8 10 12 14 16 ... [34 36 38 ...]</span><br/><span class="hl-0">    </span><span class="hl-2">filter</span><span class="hl-0">((</span><span class="hl-5">x</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-5">x</span><span class="hl-0"> % </span><span class="hl-13">3</span><span class="hl-0"> === </span><span class="hl-13">0</span><span class="hl-0">), </span><span class="hl-1">// =&gt; 6 12 18 24 30 [36 42 ...]</span><br/><span class="hl-0">    </span><span class="hl-2">skip</span><span class="hl-0">(</span><span class="hl-13">2</span><span class="hl-0">), </span><span class="hl-1">// =&gt; 18 24 30 [36 42 ...]</span><br/><span class="hl-0">    </span><span class="hl-2">take</span><span class="hl-0">(</span><span class="hl-13">3</span><span class="hl-0">), </span><span class="hl-1">// =&gt; 18 24 30</span><br/><span class="hl-0">  );</span><br/><span class="hl-1">// 1) this is essentially the same as the totally unreadable</span><br/><span class="hl-1">//    (iterator) =&gt; take(3)(skip(2)(filter((x) =&gt; x % 3 === 0)(map((x) =&gt; x * 2)(iterator))))</span><br/><span class="hl-1">// 2) the compose function is also generic, so it will work for any functions expecting a single</span><br/><span class="hl-1">//    parameter</span><br/><br/><span class="hl-1">// And with that, we can now simply do</span><br/><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-7">resultArray</span><span class="hl-0"> = </span><span class="hl-2">pipe</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-2">itr8FromIterable</span><span class="hl-0">(</span><span class="hl-5">inputArray</span><span class="hl-0">), </span><span class="hl-1">// the input iterator</span><br/><span class="hl-0">  </span><span class="hl-2">myOperator</span><span class="hl-0">(),</span><br/><span class="hl-0">  </span><span class="hl-5">itr8ToArray</span><span class="hl-0">,</span><br/><span class="hl-0">);</span><br/><br/><span class="hl-1">// if we need to execute some code for every element of the resulting iterator, use forEach</span><br/><span class="hl-1">// (which support both synchronous and asynchronous handlers, and allows you to easily set the</span><br/><span class="hl-1">// allowed concurrency as well!)</span><br/><span class="hl-2">pipe</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-2">itr8FromIterable</span><span class="hl-0">(</span><span class="hl-5">inputArray</span><span class="hl-0">), </span><span class="hl-1">// the input iterator</span><br/><span class="hl-0">  </span><span class="hl-2">myOperator</span><span class="hl-0">(),</span><br/><span class="hl-0">  </span><span class="hl-2">forEach</span><span class="hl-0">(</span><br/><span class="hl-0">    </span><span class="hl-6">async</span><span class="hl-0"> (</span><span class="hl-5">e</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-7">descr</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-2">getElementFromDisk</span><span class="hl-0">(</span><span class="hl-5">id</span><span class="hl-0">);</span><br/><span class="hl-0">      </span><span class="hl-5">console</span><span class="hl-0">.</span><span class="hl-2">log</span><span class="hl-0">(</span><span class="hl-3">&quot;element = &quot;</span><span class="hl-0">, </span><span class="hl-5">descr</span><span class="hl-0">);</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    { </span><span class="hl-5">concurrency:</span><span class="hl-0"> </span><span class="hl-13">1</span><span class="hl-0"> }, </span><span class="hl-1">// these options are optional (default concurrency is 1)</span><br/><span class="hl-0">  ),</span><br/><span class="hl-0">);</span><br/><br/><span class="hl-1">// So now that we know that we can easily apply any operator to any iterator</span><br/><span class="hl-1">// You just need to be aware of the various ways to create an iterator</span><br/><span class="hl-1">// 1) create an iterator to start from with a utility function</span><br/><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-2">myIterator</span><span class="hl-0"> = () </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-2">itr8Range</span><span class="hl-0">(</span><span class="hl-13">0</span><span class="hl-0">, </span><span class="hl-13">10_000_000</span><span class="hl-0">);</span><br/><span class="hl-1">// 2) OR create your own Iterator or AsyncIterator (for example with a generator function)</span><br/><span class="hl-6">function*</span><span class="hl-0"> </span><span class="hl-2">myGeneratorFunction</span><span class="hl-0">() {</span><br/><span class="hl-0">  </span><span class="hl-4">for</span><span class="hl-0"> (</span><span class="hl-6">let</span><span class="hl-0"> </span><span class="hl-5">i</span><span class="hl-0"> = </span><span class="hl-13">0</span><span class="hl-0">; </span><span class="hl-5">i</span><span class="hl-0"> &lt; </span><span class="hl-13">10_000_000</span><span class="hl-0">; </span><span class="hl-5">i</span><span class="hl-0">++) {</span><br/><span class="hl-0">    </span><span class="hl-4">yield</span><span class="hl-0"> </span><span class="hl-5">i</span><span class="hl-0">;</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">}</span><br/><span class="hl-1">// 3) &#39;itr8FromIterable&#39; is an easy way to get an iterator from many built-in data structures</span><br/><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-2">myOwnIterator</span><span class="hl-0"> = () </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-2">itr8FromIterable</span><span class="hl-0">(</span><span class="hl-2">myGeneratorFunction</span><span class="hl-0">());</span><br/><br/><span class="hl-1">// we can use standard JS &#39;for ... of&#39; to loop over an iterable, which works because every operator</span><br/><span class="hl-1">// returns an IterableIterator (an iterator that returns itself when being asked to return an iterator)</span><br/><span class="hl-1">// (but forEach is more powerful !)</span><br/><span class="hl-1">// This means that it will actually execute code and start &#39;draining&#39; the iterator</span><br/><span class="hl-4">for</span><span class="hl-0"> (</span><span class="hl-6">let</span><span class="hl-0"> </span><span class="hl-5">x</span><span class="hl-0"> </span><span class="hl-6">of</span><span class="hl-0"> </span><span class="hl-2">pipe</span><span class="hl-0">(</span><br/><span class="hl-0">  </span><span class="hl-2">itr8Range</span><span class="hl-0">(</span><span class="hl-13">1</span><span class="hl-0">, </span><span class="hl-13">1000</span><span class="hl-0">),</span><br/><span class="hl-0">  </span><span class="hl-2">filter</span><span class="hl-0">((</span><span class="hl-5">x</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-5">x</span><span class="hl-0"> % </span><span class="hl-13">3</span><span class="hl-0"> === </span><span class="hl-13">0</span><span class="hl-0">),</span><br/><span class="hl-0">)) {</span><br/><span class="hl-0">  </span><span class="hl-5">console</span><span class="hl-0">.</span><span class="hl-2">log</span><span class="hl-0">(</span><span class="hl-5">x</span><span class="hl-0">);</span><br/><span class="hl-0">}</span>
</code></pre>
<p>You, can find some more <a href="#documentation">documentation</a> further in this file or go straight to
<a href="https://mrft.github.io/itr8">the github site about itr8</a></p>
<p>You can see more working examples in the future in this <a href="https://replit.com/@mrft1/itr8-playground#index.ts">replit playground</a></p>

<a href="#what-is-itr8" id="what-is-itr8" style="color: inherit; text-decoration: none;">
  <h2>What is itr8</h2>
</a>
<p>An experiment to create a <strong>unified interface over both <a href="https://www.javascripttutorial.net/es6/javascript-iterator/">synchronous</a> and <a href="https://www.javascripttutorial.net/es-next/javascript-asynchronous-iterators/">asynchronous iterators</a></strong> such that the same iterator-operators (cfr. RxJS operators like filter, map, ...) can be used in various contexts (plain arrays, NodeJS streams, Observables, page-by-page database queries by writing an async generator function, page-by-age API queries, streams of events, ...).</p>
<p>This makes the code much more declarative (describing what to do rather than how to do it).</p>
<p>While working on this library, it became clear to me that many, many problems can simply be seen
as transforming one set of data into another set (which might be longer or shorter).</p>
<ul>
<li>A lexer or tokenizer is simply something that transforms a stream of characters or bytes into
a stream of tokens.</li>
<li>A parser can simply be seen as something that transforms a stream of tokens into a parse tree.</li>
<li>A web application (cfr. The Elm Architecture, AppRun, Redux) can simply be seen as something
that translates a stream of events into html output or a DOM tree.<ul>
<li>So a web application engine simply has to define this transIterator, and allow the user to fill in the application-specific blanks: the initial state, generating new state based on the incoming event, and generating html from the state.</li>
<li>Can you see how redux middleware, could simply be seen as a transIterator that will be put between the event stream before the reducer gets called?<ul>
<li>Adding a &#39;tap&#39; for logging?</li>
<li>Some kind of debounce or throttle, would also be easy and if someone already wrote that (in any context, doesn&#39;t have to be related to redux at all), you could use that existing code.</li>
</ul>
</li>
<li>Can you see how the redux reducer is simply the mapping function we have to pass into the &#39;map&#39; operator, that translates [action, currentState] tuples into newState?</li>
</ul>
</li>
</ul>
<p>The library can also be used as a base for CSP (Communicating Simple Processes). By sharing
the itr8Pushable iterator between 2 processes, one process could use it to push information onto the
channel, and the other one can use the (async) next() call to pull the next message from
the channel. I have added an <a href="#what-about-csp">example about CSP</a> below.</p>
<p>So unlike OO, where a new interface has to be invented for every new problem encountered, we basically agree on a simple protocol on how data will be delivered to and returned by all processing units, so we can focus on functionality rather than the interface.</p>
<p><strong>DISCLAIMER</strong>: This is work in progress (including the docs), and although a fair amount of functionality seems to work, things might still change along the way...
It is mainly tested on NodeJS 16 currently, but should also work in the browser.</p>

<a href="#who-is-this-library-for" id="who-is-this-library-for" style="color: inherit; text-decoration: none;">
  <h2>Who is this library for?</h2>
</a>
<p>If you ever found yourself in one of these situations, this library might be useful for you:</p>
<ul>
<li>You needed to do some filtering or mapping of some data (stored in an array for example), but the filter or map function is <em>asynchronous</em>. So instead of simply writing <code>array.filter(...).map(...)</code> you had to add a bunch of code to make it work like you wanted (maybe using sindresorhus&#39; promise-fun here and there to keep things under control). As a result, your code suddenly becomes hard to read, even if the problem you needed to solve was actually quite simple.</li>
<li>You have some data manipulation that works properly over a small array, but now you have to apply it on a a huge file that doesn&#39;t fit in memory, and now you need to entirely rewrite your code to handle this new situation.</li>
<li>You need to get some data from an API that is &#39;page-oriented&#39; (it only returns a limited number of results, and in order to get the next set of results you need to do another call). You need some manipulation on each single element of the set. Now you need to write additional logic to apply your algorithm to every element of each batch that you are processing that has nothing to do with the core problem you are trying to solve.</li>
<li>You were thrilled by RxJS, but found out it cannot be used easily when the data comes in at a higher pace than you can handle (files, db, API) and implementing pushback in RxJS feels &#39;wrong&#39;.</li>
<li>You&#39;ve tried to implement a transform stream in NodeJS but found it quite cumbersome.</li>
<li>In general: when you have the feeling you have solved the same problem a few too many times.</li>
<li>You&#39;ve used another library like IxJS, iter-tools or HighlandJS, but don&#39;t know how to write your own &#39;operators&#39; in one of them.</li>
</ul>

<a href="#why-not-rxjs-ixjs-iter-tools-highlandjs-" id="why-not-rxjs-ixjs-iter-tools-highlandjs-" style="color: inherit; text-decoration: none;">
  <h3>Why not RxJS, IxJS, iter-tools, HighlandJS, ...?</h3>
</a>
<ul>
<li>RxJS, being push-based, with no easy pushback mechanism would not solve the issue for me.
On the other hand, any problem that RxJS will solve can also be solved with (async) iterators.</li>
<li>IxJS I found too cumbersome (the docs were not clear enough for me), and I didn&#39;t see how to write my own operators (as opposed to RxJS that explains how to do that very well in the docs)</li>
<li>iter-tools: same here, how to write your own operators?</li>
<li>HighlandJS is stream based, which makes it NodeJS only (at least without browserify). Also, streams are kind of cumbersome, and the sync and async iterator protocols are dead simple and part of the standard.</li>
<li>js-iterator: &#39;dot-chaining&#39; has the disadvantage that you cannot simply add your own operators
and I hate this &#39;you-can-only-do-what-already-exists-in-the library&#39; situation.</li>
<li><a href="https://github.com/OliverJAsh/iterable-transformers/">https://github.com/OliverJAsh/iterable-transformers/</a> is unfinished.</li>
</ul>
<p>So, while all these libraries have their merit, none of them covered my needs well enough, so at a certain point things became clear enough in my head to write my own library.</p>

<a href="#what-about-csp" id="what-about-csp" style="color: inherit; text-decoration: none;">
  <h3>What about CSP?</h3>
</a>
<p>To quickly show that async iterators can easily be used for CSP in javascript, and that this combines nicely with itr8, I have rewritten an example I found in the README of <a href="https://github.com/jfet97/csp">jfet97/csp library</a> using itr8.
This way we don&#39;t need the while loop (forEach will take care of that), we don&#39;t modify the message but create a new one to send to the other side. itr8Pushable is used as the &#39;channel&#39;, and map, tap and delay transIterators implement the same functionality as is in the other example.
Also, there are no awaits in the code, because all the async plumbing is handled by the itr8 library so you can focus on the functionality.</p>
<pre><code class="language-typescript"><span class="hl-6">type</span><span class="hl-0"> </span><span class="hl-14">TBall</span><span class="hl-0"> = { </span><span class="hl-5">hits</span><span class="hl-0">: </span><span class="hl-14">number</span><span class="hl-0">; </span><span class="hl-5">status</span><span class="hl-0">: </span><span class="hl-14">string</span><span class="hl-0"> };</span><br/><br/><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-7">wiff</span><span class="hl-0"> = </span><span class="hl-2">itr8Pushable</span><span class="hl-0">&lt;</span><span class="hl-14">TBall</span><span class="hl-0">&gt;();</span><br/><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-7">waff</span><span class="hl-0"> = </span><span class="hl-2">itr8Pushable</span><span class="hl-0">&lt;</span><span class="hl-14">TBall</span><span class="hl-0">&gt;();</span><br/><br/><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-2">createBall</span><span class="hl-0"> = (): </span><span class="hl-14">TBall</span><span class="hl-0"> </span><span class="hl-6">=&gt;</span><span class="hl-0"> ({ </span><span class="hl-5">hits:</span><span class="hl-0"> </span><span class="hl-13">0</span><span class="hl-0">, </span><span class="hl-5">status:</span><span class="hl-0"> </span><span class="hl-3">&quot;&quot;</span><span class="hl-0"> });</span><br/><br/><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-2">createBat</span><span class="hl-0"> = </span><span class="hl-6">async</span><span class="hl-0"> (</span><br/><span class="hl-0">  </span><span class="hl-5">inbound</span><span class="hl-0">: </span><span class="hl-14">AsyncIterableIterator</span><span class="hl-0">&lt;</span><span class="hl-14">TBall</span><span class="hl-0">&gt; &amp; </span><span class="hl-14">TPushable</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-5">outbound</span><span class="hl-0">: </span><span class="hl-14">AsyncIterableIterator</span><span class="hl-0">&lt;</span><span class="hl-14">TBall</span><span class="hl-0">&gt; &amp; </span><span class="hl-14">TPushable</span><span class="hl-0">,</span><br/><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-2">pipe</span><span class="hl-0">(</span><br/><span class="hl-0">    </span><span class="hl-5">inbound</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">map</span><span class="hl-0">(({ </span><span class="hl-5">hits</span><span class="hl-0">, </span><span class="hl-5">status</span><span class="hl-0"> }) </span><span class="hl-6">=&gt;</span><span class="hl-0"> ({</span><br/><span class="hl-0">      </span><span class="hl-5">hits:</span><span class="hl-0"> </span><span class="hl-5">hits</span><span class="hl-0"> + </span><span class="hl-13">1</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-5">status:</span><span class="hl-0"> </span><span class="hl-5">status</span><span class="hl-0"> === </span><span class="hl-3">&quot;wiff!&quot;</span><span class="hl-0"> ? </span><span class="hl-3">&quot;waff!&quot;</span><span class="hl-0"> : </span><span class="hl-3">&quot;wiff!&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    })),</span><br/><span class="hl-0">    </span><span class="hl-2">tap</span><span class="hl-0">(({ </span><span class="hl-5">hits</span><span class="hl-0">, </span><span class="hl-5">status</span><span class="hl-0"> }) </span><span class="hl-6">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-5">console</span><span class="hl-0">.</span><span class="hl-2">log</span><span class="hl-0">(</span><span class="hl-3">`ðŸŽ¾  Ball hit </span><span class="hl-6">${</span><span class="hl-5">hits</span><span class="hl-6">}</span><span class="hl-3"> time(s), </span><span class="hl-6">${</span><span class="hl-5">status</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-0">);</span><br/><span class="hl-0">    }),</span><br/><span class="hl-0">    </span><span class="hl-2">delay</span><span class="hl-0">(</span><span class="hl-13">500</span><span class="hl-0">), </span><span class="hl-1">// assume it&#39;s going to take a bit to hit the ball</span><br/><span class="hl-0">    </span><span class="hl-2">forEach</span><span class="hl-0">((</span><span class="hl-5">b</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-5">outbound</span><span class="hl-0">.</span><span class="hl-2">push</span><span class="hl-0">(</span><span class="hl-5">b</span><span class="hl-0">)), </span><span class="hl-1">// smash the ball back</span><br/><span class="hl-0">  );</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-2">createBat</span><span class="hl-0">(</span><span class="hl-5">waff</span><span class="hl-0">, </span><span class="hl-5">wiff</span><span class="hl-0">); </span><span class="hl-1">// create a bat that will wiff waffs</span><br/><span class="hl-2">createBat</span><span class="hl-0">(</span><span class="hl-5">wiff</span><span class="hl-0">, </span><span class="hl-5">waff</span><span class="hl-0">); </span><span class="hl-1">// create a bat that will waff wiffs</span><br/><br/><span class="hl-5">waff</span><span class="hl-0">.</span><span class="hl-2">push</span><span class="hl-0">(</span><span class="hl-2">createBall</span><span class="hl-0">());</span>
</code></pre>

<a href="#roadmap" id="roadmap" style="color: inherit; text-decoration: none;">
  <h2>Roadmap</h2>
</a>
<p>The ROADMAP.md contains various ideas about possible additions to the library and how this
library could evolve in the future.
<a href="pages/ROADMAP.html">Roadmap</a></p>

<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
  <h1>Documentation</h1>
</a>

<a href="#api-documentation" id="api-documentation" style="color: inherit; text-decoration: none;">
  <h2>API documentation</h2>
</a>
<p>Check <a href="https://mrft.github.io/itr8/modules.html">https://mrft.github.io/itr8/modules.html</a> to find developer documentation about all operators, interface functions and utility functions.</p>

<a href="#what-is-a-transiterator" id="what-is-a-transiterator" style="color: inherit; text-decoration: none;">
  <h2>What is a transIterator?</h2>
</a>
<p>It is simply a function with an iterator as single argument which will return another iterator. So it transforms iterators, which is why I have called it transIterator (~transducers). The cool thing about it is that you can easily chain them together, by using the output of the first one as input of the next one and so on. You could compare this to piping in linux, where each tool typically reads from stdin, and outputs to stdout, and the pipe symbol makes sure that the output of the first program is used as input of the next one.</p>

<a href="#what-is-the-difference-between-a-transiterator-and-an-operator" id="what-is-the-difference-between-a-transiterator-and-an-operator" style="color: inherit; text-decoration: none;">
  <h3>What is the difference between a transIterator and an operator?</h3>
</a>
<p>An operator is &#39;a function that generates a transIterator&#39;. So for example filter(...) is an operator, because when called with an argument (the filter function) the result of that will be another function which is the transIterator.</p>

<a href="#writing-your-own-operators" id="writing-your-own-operators" style="color: inherit; text-decoration: none;">
  <h2>Writing your own operators</h2>
</a>
<p>There are multiple options for writing your own operators. You can either build a new operator by
chaining a bunch of existing operators together, or you can write your own (ideally with the
powerMap operator).</p>

<a href="#a-new-operator-by-combining-existing-operators" id="a-new-operator-by-combining-existing-operators" style="color: inherit; text-decoration: none;">
  <h3>A new operator by combining existing operators</h3>
</a>
<p>Let&#39;s use the same example as is used in the <a href="https://netbasal.com/creating-custom-operators-in-rxjs-32f052d69457#7b9e">RxJS tutorial</a>: a filterNil operator.</p>
<p>It can be created with the filter operator, like this:</p>
<pre><code class="language-typescript"><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-2">filterNil</span><span class="hl-0"> = () </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-2">filter</span><span class="hl-0">((</span><span class="hl-5">x</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-5">x</span><span class="hl-0"> !== </span><span class="hl-6">undefined</span><span class="hl-0"> &amp;&amp; </span><span class="hl-5">x</span><span class="hl-0"> !== </span><span class="hl-6">null</span><span class="hl-0">);</span>
</code></pre>
<p>Another example: a &#39;regroup&#39; operator can be created by combining flatten and groupPer. This is where the <code>compose(...)</code> method will come in handy.
So to turn [ [ 1, 2 ], [ 3, 4 ], [ 5, 6 ] ] into [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]
You&#39;ll want the regroup(3) operator (3 being the new &#39;rowSize&#39;).</p>
<pre><code class="language-typescript"><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-2">regroup</span><span class="hl-0"> = (</span><span class="hl-5">rowSize</span><span class="hl-0">: </span><span class="hl-14">number</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-2">compose</span><span class="hl-0">(</span><span class="hl-2">flatten</span><span class="hl-0">(), </span><span class="hl-2">groupPer</span><span class="hl-0">(</span><span class="hl-5">rowSize</span><span class="hl-0">));</span>
</code></pre>

<a href="#writing-a-new-operator-from-scratch" id="writing-a-new-operator-from-scratch" style="color: inherit; text-decoration: none;">
  <h3>Writing a new operator from scratch</h3>
</a>
<p>We&#39;ll explain to you how to use the powerMap, which makes it easy to write operators whose output transIterators correctly handle both synchronous and asynchronous iterators.</p>
<p>When writing operators, we also have the <em>thenable</em> and <em>forLoop</em> utility functions, which are also meant to be able to write the same code, regardless whether the input is a normal value or a promise.</p>

<a href="#a-simple-example-operator-filternil" id="a-simple-example-operator-filternil" style="color: inherit; text-decoration: none;">
  <h4>A simple example operator: filterNil</h4>
</a>
<p>Let&#39;s show you the code right away:</p>
<pre><code class="language-typescript"><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-2">filterNil</span><span class="hl-0"> = () </span><span class="hl-6">=&gt;</span><br/><span class="hl-0">  </span><span class="hl-2">powerMap</span><span class="hl-0">&lt;</span><span class="hl-14">any</span><span class="hl-0">, </span><span class="hl-14">any</span><span class="hl-0">&gt;(</span><br/><span class="hl-0">    (</span><span class="hl-5">nextIn</span><span class="hl-0">, </span><span class="hl-5">state</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-4">if</span><span class="hl-0"> (</span><span class="hl-5">nextIn</span><span class="hl-0">.</span><span class="hl-5">done</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-4">return</span><span class="hl-0"> { </span><span class="hl-5">done:</span><span class="hl-0"> </span><span class="hl-6">true</span><span class="hl-0"> };</span><br/><span class="hl-0">      } </span><span class="hl-4">else</span><span class="hl-0"> </span><span class="hl-4">if</span><span class="hl-0"> (</span><span class="hl-5">nextIn</span><span class="hl-0">.</span><span class="hl-5">value</span><span class="hl-0"> === </span><span class="hl-6">undefined</span><span class="hl-0"> || </span><span class="hl-5">nextIn</span><span class="hl-0">.</span><span class="hl-5">value</span><span class="hl-0"> === </span><span class="hl-6">null</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-1">// nill so it&#39;s not done, but don&#39;t return a value</span><br/><span class="hl-0">        </span><span class="hl-4">return</span><span class="hl-0"> { </span><span class="hl-5">done:</span><span class="hl-0"> </span><span class="hl-6">false</span><span class="hl-0"> };</span><br/><span class="hl-0">      } </span><span class="hl-4">else</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-1">// not nill, so it&#39;s not done, and return the value</span><br/><span class="hl-0">        </span><span class="hl-4">return</span><span class="hl-0"> { </span><span class="hl-5">done:</span><span class="hl-0"> </span><span class="hl-6">false</span><span class="hl-0">, </span><span class="hl-5">value:</span><span class="hl-0"> </span><span class="hl-5">nextIn</span><span class="hl-0">.</span><span class="hl-5">value</span><span class="hl-0"> };</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    () </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-6">null</span><span class="hl-0">, </span><span class="hl-1">// no state needed</span><br/><span class="hl-0">  );</span>
</code></pre>
<p>Now what is nextIn, and state?</p>
<ul>
<li>nextIn is simply the result of the next call of the incoming iterator. (The next call of an iterator always returns an object of the form <code>{ done: &lt;true or false&gt;, value: &lt;current value&gt; }</code>)</li>
<li>state is used to store intermediate data, for example if you want to make a sum, the state will be the sum until now, or if you need to buffer things, state could be the array of things in the buffer.</li>
</ul>
<p>What does that function return?</p>
<p>It returns an object that looks a lot like ...drum roll... the result of a next call of an iterator (<em>but it&#39;s not entirely the same!</em>). Make sure you&#39;ve read and understood the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterator_protocol">iterator protocol</a>!</p>
<ul>
<li>if the output iterator will return no more elements it is <code>{ done:true }</code></li>
<li>if the output iterator is not done, but does not return anything based on the current value of the input iterator, the value is <code>{ done: false }</code>, without a value or <code>{ done: false, state: &lt;newState\&gt; }</code> if you need to update the state</li>
<li>if the output iterator is not done, and it does need to return a value, it is <code>{ done: false, value: &lt;output value\&gt; }</code> (again with an optional state property if you need to pass state to the next step)</li>
<li>if the output iterator is not done, and the current input iterator value would output <em>more than a single item</em>, it is <code>{ done: false, iterable: &lt;your iterable\&gt; }</code>. Any Iterable (or IterableIterator) will do. (That means in practice that you can use a <em>simple array</em>, but a <em>generator function</em> will work as well, or some iterator that is the result of some input with a few itr8 operators applied to it).</li>
</ul>
<p>Knowing all this we can break down the example:</p>
<ul>
<li>if the input iterator is done, we&#39;ll return that it&#39;s done</li>
<li>if the input iterator&#39;s value is either null or undefined, we&#39;ll return that its not done, but won&#39;t provide a value</li>
<li>otherwise we&#39;ll just pass the incoming thing unaltered</li>
<li>we don&#39;t need state, so we never specify the state property</li>
</ul>

<a href="#a-slightly-more-advaced-example-operator-repeateach" id="a-slightly-more-advaced-example-operator-repeateach" style="color: inherit; text-decoration: none;">
  <h4>A slightly more advaced example operator: RepeatEach</h4>
</a>
<p>Let&#39;s write an operator that repeats each value from the input iterator n times on the output iterator:</p>
<pre><code class="language-typescript"><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-2">opr8RepeatEach</span><span class="hl-0"> = &lt;</span><span class="hl-14">TIn</span><span class="hl-0">&gt;(</span><span class="hl-5">count</span><span class="hl-0">: </span><span class="hl-14">number</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><br/><span class="hl-0">  </span><span class="hl-2">powerMap</span><span class="hl-0">&lt;</span><span class="hl-14">TIn</span><span class="hl-0">, </span><span class="hl-14">TIn</span><span class="hl-0">&gt;(</span><br/><span class="hl-0">    (</span><span class="hl-5">nextIn</span><span class="hl-0">, </span><span class="hl-5">_state</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-4">if</span><span class="hl-0"> (</span><span class="hl-5">nextIn</span><span class="hl-0">.</span><span class="hl-5">done</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-4">return</span><span class="hl-0"> { </span><span class="hl-5">done:</span><span class="hl-0"> </span><span class="hl-6">true</span><span class="hl-0"> };</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-4">return</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-5">done:</span><span class="hl-0"> </span><span class="hl-6">false</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-5">iterable:</span><span class="hl-0"> (</span><span class="hl-6">function*</span><span class="hl-0"> () {</span><br/><span class="hl-0">          </span><span class="hl-4">for</span><span class="hl-0"> (</span><span class="hl-6">let</span><span class="hl-0"> </span><span class="hl-5">i</span><span class="hl-0"> = </span><span class="hl-13">0</span><span class="hl-0">; </span><span class="hl-5">i</span><span class="hl-0"> &lt; </span><span class="hl-5">count</span><span class="hl-0">; </span><span class="hl-5">i</span><span class="hl-0">++) {</span><br/><span class="hl-0">            </span><span class="hl-4">yield</span><span class="hl-0"> </span><span class="hl-5">nextIn</span><span class="hl-0">.</span><span class="hl-5">value</span><span class="hl-0">;</span><br/><span class="hl-0">          }</span><br/><span class="hl-0">        })(),</span><br/><span class="hl-0">      };</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    () </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-6">undefined</span><span class="hl-0">,</span><br/><span class="hl-0">  );</span>
</code></pre>
<p>As you can see, we use the &#39;iterable&#39; property here, and in order to easily generate an IterableIterator, we use an &#39;immediately invoked function expression&#39;. This is important since a generator function generates an IterableIterator, so it should be called!</p>
<p>But you could also assign an array, because that is also an iterable. But beware that creating an intermediate array will use more memory (especially if the count is high)! I&#39;ll show you the same example with an array here:</p>
<pre><code class="language-typescript"><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-2">opr8RepeatEach</span><span class="hl-0"> = &lt;</span><span class="hl-14">TIn</span><span class="hl-0">&gt;(</span><span class="hl-5">count</span><span class="hl-0">: </span><span class="hl-14">number</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><br/><span class="hl-0">  </span><span class="hl-2">powerMap</span><span class="hl-0">&lt;</span><span class="hl-14">TIn</span><span class="hl-0">, </span><span class="hl-14">TIn</span><span class="hl-0">&gt;(</span><br/><span class="hl-0">    (</span><span class="hl-5">nextIn</span><span class="hl-0">, </span><span class="hl-5">_state</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-4">if</span><span class="hl-0"> (</span><span class="hl-5">nextIn</span><span class="hl-0">.</span><span class="hl-5">done</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-4">return</span><span class="hl-0"> { </span><span class="hl-5">done:</span><span class="hl-0"> </span><span class="hl-6">true</span><span class="hl-0"> };</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-4">return</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-5">done:</span><span class="hl-0"> </span><span class="hl-6">false</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-5">iterable:</span><span class="hl-0"> </span><span class="hl-5">Array</span><span class="hl-0">.</span><span class="hl-2">from</span><span class="hl-0">(</span><span class="hl-2">Array</span><span class="hl-0">(</span><span class="hl-5">count</span><span class="hl-0">)).</span><span class="hl-2">map</span><span class="hl-0">((</span><span class="hl-5">x</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-5">nextIn</span><span class="hl-0">.</span><span class="hl-5">value</span><span class="hl-0">),</span><br/><span class="hl-0">      };</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    () </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-6">undefined</span><span class="hl-0">,</span><br/><span class="hl-0">  );</span>
</code></pre>

<a href="#an-example-operator-that-needs-some-state-total" id="an-example-operator-that-needs-some-state-total" style="color: inherit; text-decoration: none;">
  <h4>An example operator that needs some state: total</h4>
</a>
<p>What if we have an iterator that holds numbers and we want to calculate the total sum?
This can only be done by holding on to the &#39;sum so far&#39;, because with each new element we need to add the current value to the value we already have calculated.</p>
<pre><code class="language-typescript"><span class="hl-6">const</span><span class="hl-0"> </span><span class="hl-2">total</span><span class="hl-0"> = () </span><span class="hl-6">=&gt;</span><br/><span class="hl-0">  </span><span class="hl-2">powerMap</span><span class="hl-0">&lt;</span><span class="hl-14">number</span><span class="hl-0">, </span><span class="hl-14">number</span><span class="hl-0">, { </span><span class="hl-5">done</span><span class="hl-0">: </span><span class="hl-14">boolean</span><span class="hl-0">; </span><span class="hl-5">total</span><span class="hl-0">: </span><span class="hl-14">number</span><span class="hl-0"> }&gt;(</span><br/><span class="hl-0">    (</span><span class="hl-5">nextIn</span><span class="hl-0">, </span><span class="hl-5">state</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-4">if</span><span class="hl-0"> (</span><span class="hl-5">state</span><span class="hl-0">.</span><span class="hl-5">done</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-4">return</span><span class="hl-0"> { </span><span class="hl-5">done:</span><span class="hl-0"> </span><span class="hl-6">true</span><span class="hl-0"> };</span><br/><span class="hl-0">      } </span><span class="hl-4">else</span><span class="hl-0"> </span><span class="hl-4">if</span><span class="hl-0"> (</span><span class="hl-5">nextIn</span><span class="hl-0">.</span><span class="hl-5">done</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-4">return</span><span class="hl-0"> {</span><br/><span class="hl-0">          </span><span class="hl-5">done:</span><span class="hl-0"> </span><span class="hl-6">false</span><span class="hl-0">,</span><br/><span class="hl-0">          </span><span class="hl-5">value:</span><span class="hl-0"> </span><span class="hl-5">state</span><span class="hl-0">.</span><span class="hl-5">total</span><span class="hl-0">,</span><br/><span class="hl-0">          </span><span class="hl-5">state:</span><span class="hl-0"> { ...</span><span class="hl-5">state</span><span class="hl-0">, </span><span class="hl-5">done:</span><span class="hl-0"> </span><span class="hl-6">true</span><span class="hl-0"> },</span><br/><span class="hl-0">        };</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-4">return</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-5">done:</span><span class="hl-0"> </span><span class="hl-6">false</span><span class="hl-0">,</span><br/><span class="hl-0">        </span><span class="hl-5">state:</span><span class="hl-0"> { ...</span><span class="hl-5">state</span><span class="hl-0">, </span><span class="hl-5">total:</span><span class="hl-0"> </span><span class="hl-5">state</span><span class="hl-0">.</span><span class="hl-5">total</span><span class="hl-0"> + </span><span class="hl-5">nextIn</span><span class="hl-0">.</span><span class="hl-5">value</span><span class="hl-0"> },</span><br/><span class="hl-0">      };</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    () </span><span class="hl-6">=&gt;</span><span class="hl-0"> ({ </span><span class="hl-5">done:</span><span class="hl-0"> </span><span class="hl-6">false</span><span class="hl-0">, </span><span class="hl-5">total:</span><span class="hl-0"> </span><span class="hl-13">0</span><span class="hl-0"> }),</span><br/><span class="hl-0">  );</span>
</code></pre>
<p>Here you can see that we also specified the second argument of the powerMap function, which is the initialState (not done, and the total so far = 0).</p>
<p>So this iterator will only return a value on the output iterator once the input iterator has finished. Hence the &#39;done&#39; flag on the state to indicate that we&#39;ve seen the last element of the input iterator.</p>
<ul>
<li>When we see that we&#39;re done in the state (= the next call after the one where we finally sent a value to the output iterator) we&#39;ll send <code>{ done: true }</code>.</li>
<li>When we see the last element of the input iterator, we don&#39;t modify the sum anymore, but send the total sum as the value, and indicate that there won&#39;t be any more values by setting the &#39;done&#39; flag on the state</li>
<li>In all other cases, we don&#39;t send a value, but we generate a new version of the state where the &#39;total&#39; property is set to the current state&#39;s total + nextIn.value</li>
</ul>

<a href="#i-don39t-think-that-the-operator-i-want-can-be-built-with-the-powermap-operator" id="i-don39t-think-that-the-operator-i-want-can-be-built-with-the-powermap-operator" style="color: inherit; text-decoration: none;">
  <h4>I don&#39;t think that the operator I want can be built with the powerMap operator</h4>
</a>
<p>If you have read the examples above, and you still don&#39;t see how to write your operator,
it could be that it cannot be written with the powerMap operator. (But to be honest,
at first I thought I had to write debounce and throttle by combining forEach with an
itr8Pushable, but later I realized that was not necessary, and I made a proper version
with powerMap operator which was passive again).</p>
<p>But if you are convinced that is the case, I advise you to look at the source code of
&#39;prefetch&#39; or &#39;mostRecent&#39;.
Prefetch and mostRecent are actually returning a custom built iterator.</p>
<p>As long as your operator returns a function transforming the input iterator into another iterator,
you&#39;re good (and to be <em>itr8-approved</em>: always support both sync and async iterators as input, and if
possible, make sure that if the input iterator is synchronous, the output iterator is synchronous
as well).</p>

<a href="#notes" id="notes" style="color: inherit; text-decoration: none;">
  <h4>Notes</h4>
</a>
<ul>
<li><p>The function given to the powerMap operator can also be ASYNC (useful if you can only know the new state after an async operation).</p>
</li>
<li><p>The function given to the powerMap operator can also return an ASYNC iterator (useful if you can only know each new elements after another async operation).</p>
</li>
</ul>

<a href="#inspiration" id="inspiration" style="color: inherit; text-decoration: none;">
  <h1>Inspiration</h1>
</a>
<p>This section contains background info and random thoughts on how I ended up writing this library, so you can skip this...</p>

<a href="#what-sparked-the-idea" id="what-sparked-the-idea" style="color: inherit; text-decoration: none;">
  <h2>What sparked the idea</h2>
</a>
<p>The idea for this came from my search for a unified way to handle gets from an API, data from files, data in arrays, and I got frustrated that I needed to use HighlandJS for the file thing, but that I couldn&#39;t easily use that same library for handling stuff I got from an API in NodeJS as well as in the browser.</p>
<ul>
<li>RxJS, being push based and thus having no easy push-back mechanism, always seemed too limited to me for my use-case.</li>
<li>Some people claim that &#39;a pull is 2 pushes&#39;, and so theoretically they can solve these problems with RxJS, but that somehow seemed way too complex for me.</li>
<li>HighlandJS did a great job, but somehow streams always seemed to not be a good base (ever written a transform stream?) also due to streams being NodeJS specific.</li>
</ul>
<p>Now all anyone has to do is write a generator function for his use case, and they are good to go.</p>
<p>It took me a while and a lot of reading to have a clear picture in my head of how I could unify everything I found online in one single solution.</p>
<p>Some things that I read that helped me to get a better understanding:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=4jusLF_Xz7Q">Design Patterns in Functional programming by Scott Wlaschin</a></li>
<li><a href="http://blog.sigfpe.com/2006/08/you-could-have-invented-monads-and.html">You Could Have Invented Monads! (And Maybe You Already Have.)</a></li>
<li><a href="https://itnext.io/lossless-backpressure-in-rxjs-b6de30a1b6d4">Lossless backpressue in RxJS</a></li>
<li>Stuff about CSP which triggered me to understand better where generator functions could be useful.<ul>
<li><a href="https://tgvashworth.com/2014/08/31/csp-and-transducers.html">https://tgvashworth.com/2014/08/31/csp-and-transducers.html</a></li>
<li><a href="https://medium.com/free-code-camp/csp-vs-rxjs-what-you-dont-know-1542cd5dd100">https://medium.com/free-code-camp/csp-vs-rxjs-what-you-dont-know-1542cd5dd100</a></li>
<li><a href="https://medium.com/javascript-scene/transducers-efficient-data-processing-pipelines-in-javascript-7985330fe73d">https://medium.com/javascript-scene/transducers-efficient-data-processing-pipelines-in-javascript-7985330fe73d</a></li>
<li><a href="https://dev.to/rasmusvhansen/rxjs-transducer---harness-the-power-of-rxjs-operators-1ai8">https://dev.to/rasmusvhansen/rxjs-transducer---harness-the-power-of-rxjs-operators-1ai8</a></li>
<li><a href="https://github.com/rasmusvhansen/rxjs-transducer">https://github.com/rasmusvhansen/rxjs-transducer</a></li>
<li><a href="https://benlesh.medium.com/rxjs-observable-interop-with-promises-and-async-await-bebb05306875">https://benlesh.medium.com/rxjs-observable-interop-with-promises-and-async-await-bebb05306875</a></li>
</ul>
</li>
</ul>

<a href="#the-reasoning-behind-this-library" id="the-reasoning-behind-this-library" style="color: inherit; text-decoration: none;">
  <h2>The reasoning behind this library</h2>
</a>
<p>Quote: &quot;So, a transducer is a function that transforms a reducer into another reducer, opening the doors of composition.&quot;</p>
<p>And composition is what we all want, but there doesn&#39;t seem to be a single way to do things:</p>
<ul>
<li>Libraries like RxJS solve it by inventing something new called Observables.</li>
<li>Using transform streams is cumbersome!</li>
<li>Other libraries like HighlandJS do something similar to IxJS, but built upon NodeJS streams, which makes it non-browser-friendly (you&#39;d need browserify).</li>
<li>A project called rxjs-transducer exists that tries to reuse the RxJS &#39;operators&#39; in other contexts, but it seems about arrays and not iterators at first sight.</li>
<li>The current <a href="https://github.com/tc39/proposal-iterator-helpers">proposal for iterator helpers</a>
solves things the same way as they have been solved for arrays. The problem with this is that
<strong>the iterator must contain all available operators as properties</strong>, which keeps people from writing
reuseable new operators, thus people keep solving the same problems over and over again.</li>
<li><a href="https://github.com/tenorviol/js-iterator">js-iterator</a> has the exact same problem (as does every library that uses dot-chaining)</li>
</ul>
<p>There does not seem to be an easy way to treat all these as essentialy the same.
It also makes sense to use things that are part of the &quot;standard&quot; as much as possible, as it will produce less friction using it in multiple environments.</p>
<p>So here is another version of the schema on rxjs.dev that tries to explain what <a href="https://rxjs.dev/guide/observable">RxJS Observables</a> are:</p>
<table>
<thead>
<tr>
<th></th>
<th>Single</th>
<th>Multiple</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Pull</strong></td>
<td>Function</td>
<td>Iterator</td>
</tr>
<tr>
<td><strong>Push</strong></td>
<td>Callback function</td>
<td><del>Observable</del> Async Iterator</td>
</tr>
</tbody></table>
<p>And the more I think about it, the lesser this schema makes sense to me at all, so maybe the schema should be something 3-dimensional and not 2-dimensional like:</p>
<ul>
<li>You can get multiple results separated in space or time. Separated in space would be an array, separated in time would be Iterators or Observable.</li>
<li>A function can either return a result immediately or callback with the response. And that callback could be called once (Promise), or multiple times (Events and Observables).</li>
<li>A function can always return the same result (stateless) or a different result each time (stateful).
I should try to get that in a nice schema somehow.</li>
</ul>
<p>My conclusion was: you could build something similar based on Iterators, and then you could create operators that work both on sync or async iterators, which solves all these problems with a single solution.
In my view, if we create a set of functions that take some arguments as input, and that produces functions transforming an existing iterator into a new iterator, we have all we need. And since it is pull-based it doesn&#39;t matter if the producer is faster, but it also means we can handle any situation that RxJS can handle, because it means we can definitely handle all &#39;reactive&#39; cases where the producer is slower than the consumer.</p>
<p>But because not all iterators can produce the data synchronously, we will need to make sure all of them can handle <em>both synchronous and asynchronous</em> iterators (where a &#39;next()&#39; call will return a Promise). This will allow us to support streams, as well as Observables (+ all the basics like arrays). Actually <a href="https://nodejs.org/api/stream.html#stream_streams_compatibility_with_async_generators_and_async_iterators">NodeJs streams are already AsyncIterables</a> right now, so we don&#39;t even need a helper funtion to use them as a source!</p>
<p>So with a few utility functions that would make an iterator from its input (built-in iterables like array, string, stream, the arguments object, or other things that could easily be iterated over like Observables, ...). Also check <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#built-in_iterables">Built-In Iterables on MDN</a></p>
<pre><code class="language-typescript"><span class="hl-2">itr8FromIterable</span><span class="hl-0">(</span><span class="hl-5">myArray</span><span class="hl-0">);</span><br/><span class="hl-2">itr8FromIterable</span><span class="hl-0">(</span><span class="hl-5">myString</span><span class="hl-0">);</span><br/><span class="hl-1">// streams are AsyncIterables, way easier than stream.on(&#39;data&#39;, ...)!!!</span><br/><span class="hl-2">itr8FromIterable</span><span class="hl-0">(</span><span class="hl-5">someStream</span><span class="hl-0">);</span><br/><br/><span class="hl-1">// or if you&#39;re into Observables</span><br/><span class="hl-2">itr8FromObservable</span><span class="hl-0">(</span><span class="hl-5">someObservable</span><span class="hl-0">);</span>
</code></pre>
<p>We could then write a bunch of &#39;operators&#39; which are simply functions taking an iterator
(+ some arguments) as input and returning another iterator as output.</p>
<pre><code><span class="hl-6">function</span><span class="hl-0">(...</span><span class="hl-5">argumants</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-4">return</span><span class="hl-0"> (</span><span class="hl-5">itr</span><span class="hl-0">:</span><span class="hl-14">Iterator</span><span class="hl-0">) </span><span class="hl-6">=&gt;</span><span class="hl-0"> </span><span class="hl-5">Iterator</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#related-work" id="related-work" style="color: inherit; text-decoration: none;">
  <h2>Related work</h2>
</a>
<p>In this section I will list various libraries, projects and articles that I found mostly after having written this library, which are exploring or building upon similar ideas.</p>
<ul>
<li><a href="https://github.com/WimJongeneel/ts-lazy-collections">ts-lazy-collections</a>: &quot;lazy collections with iterators for TypeScript&quot;. Experimental code, explained in <a href="https://itnext.io/fast-pipelines-with-generators-in-typescript-85d285ae6f51">this article called &#39;fast pipelines with generators in typescript&#39;</a></li>
<li>The comments on the previous article mention a few other options:<ul>
<li><a href="https://www.npmjs.com/package/dotless">dottless</a>: &quot;a JavaScript library to write linq style functional code&quot;. It uses the same idea of not dot-chaining the methods (hence the name), so it&#39;s very powerful, but I don&#39;t see support for async iterators.</li>
<li><a href="http://danieltao.com/lazy.js/">lazy.js</a>: &quot;like underscore, but lazier&quot;. Dot-chaining again. No async iterator support I think.</li>
<li><a href="https://labs42io.github.io/itiriri/">itiriri</a>. Dot chaining again, and only for synchronous iterators, although it has an async sister called <a href="https://labs42io.github.io/itiriri-async/">itiriri-async</a></li>
</ul>
</li>
<li><a href="https://www.npmjs.com/package/iter8">iter8</a>: &quot;Use iterables, iterators and generators as easily as arrays. Provides the complete Array API (plus a lot more), and works with everything you throw at it.&quot;. Dot-chaining again. No async iterator support I think.</li>
<li>An article called &quot;<a href="https://medium.com/dailyjs/decoupling-business-logic-using-async-generators-cc257f80ab33">Decouple Business Logic using Async Generators</a>&quot; on mediom.com.</li>
<li><a href="https://github.com/vitaly-t/iter-ops">iter-ops</a> from vitaly-t (author of pg-promise) which is very similar, but uses iterables as the base instead of iterators like itr8 does... I added itr8 0.4.5 to the benchmark of iter-ops, and this is the result: itr8 currently pays a high price for synchronous code, but actually performs slightly better than iter-ops for asynchronous code.<pre><code><span class="hl-5">Synchronous</span><span class="hl-0"> </span><span class="hl-5">test</span><span class="hl-0"> </span><span class="hl-5">for</span><span class="hl-0"> </span><span class="hl-13">1e+7</span><span class="hl-0"> </span><span class="hl-15">items</span><span class="hl-0">:</span><br/><span class="hl-0">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br/><span class="hl-0">â”‚  (</span><span class="hl-5">index</span><span class="hl-0">)   â”‚ </span><span class="hl-5">duration</span><span class="hl-0"> â”‚ </span><span class="hl-5">length</span><span class="hl-0">  â”‚</span><br/><span class="hl-0">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br/><span class="hl-0">â”‚  </span><span class="hl-5">iter</span><span class="hl-0">-</span><span class="hl-5">ops</span><span class="hl-0">  â”‚   </span><span class="hl-13">292</span><span class="hl-0">    â”‚ </span><span class="hl-13">5000000</span><span class="hl-0"> â”‚</span><br/><span class="hl-0">â”‚    </span><span class="hl-5">rxjs</span><span class="hl-0">    â”‚   </span><span class="hl-13">339</span><span class="hl-0">    â”‚ </span><span class="hl-13">5000000</span><span class="hl-0"> â”‚</span><br/><span class="hl-0">â”‚ </span><span class="hl-5">rxjs</span><span class="hl-0"> + </span><span class="hl-5">sub</span><span class="hl-0"> â”‚   </span><span class="hl-13">1550</span><span class="hl-0">   â”‚ </span><span class="hl-13">5000000</span><span class="hl-0"> â”‚</span><br/><span class="hl-0">â”‚    </span><span class="hl-5">itr8</span><span class="hl-0">    â”‚   </span><span class="hl-13">2000</span><span class="hl-0">   â”‚ </span><span class="hl-13">5000000</span><span class="hl-0"> â”‚</span><br/><span class="hl-0">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br/><span class="hl-5">Asynchronous</span><span class="hl-0"> </span><span class="hl-5">test</span><span class="hl-0"> </span><span class="hl-5">for</span><span class="hl-0"> </span><span class="hl-13">1e+7</span><span class="hl-0"> </span><span class="hl-15">items</span><span class="hl-0">:</span><br/><span class="hl-0">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span><br/><span class="hl-0">â”‚  (</span><span class="hl-5">index</span><span class="hl-0">)   â”‚ </span><span class="hl-5">duration</span><span class="hl-0"> â”‚ </span><span class="hl-5">length</span><span class="hl-0">  â”‚</span><br/><span class="hl-0">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span><br/><span class="hl-0">â”‚  </span><span class="hl-5">iter</span><span class="hl-0">-</span><span class="hl-5">ops</span><span class="hl-0">  â”‚   </span><span class="hl-13">7403</span><span class="hl-0">   â”‚ </span><span class="hl-13">5000000</span><span class="hl-0"> â”‚</span><br/><span class="hl-0">â”‚    </span><span class="hl-5">rxjs</span><span class="hl-0">    â”‚   </span><span class="hl-13">3248</span><span class="hl-0">   â”‚ </span><span class="hl-13">5000000</span><span class="hl-0"> â”‚</span><br/><span class="hl-0">â”‚ </span><span class="hl-5">rxjs</span><span class="hl-0"> + </span><span class="hl-5">sub</span><span class="hl-0"> â”‚   </span><span class="hl-13">7788</span><span class="hl-0">   â”‚ </span><span class="hl-13">5000000</span><span class="hl-0"> â”‚</span><br/><span class="hl-0">â”‚    </span><span class="hl-5">itr8</span><span class="hl-0">    â”‚   </span><span class="hl-13">6860</span><span class="hl-0">   â”‚ </span><span class="hl-13">5000000</span><span class="hl-0"> â”‚</span><br/><span class="hl-0">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
</li>
<li><a href="https://github.com/felixfbecker/iterare">iterare</a>: Dot-chaining again. No async iterator support I think.</li>
</ul>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">itr8</a>
<ul>
<li class="pages-entry pages-entry-page pages-entry-depth-1"><a href="pages/ROADMAP.html">Roadmap</a></li>
<li class="tsd-kind-module"><a href="modules/index.html">index</a></li>
<li class="tsd-kind-module"><a href="modules/interface.html">interface</a></li>
<li class="tsd-kind-module"><a href="modules/operators.html">operators</a></li>
<li class="tsd-kind-module"><a href="modules/peer.html">peer</a></li>
<li class="tsd-kind-module"><a href="modules/util.html">util</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>