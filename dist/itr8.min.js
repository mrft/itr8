var d=function(e){return e!=null&&Object.prototype.toString.call(e)==="[object Promise]"},H=Object.getPrototypeOf(async function(){}).constructor,f=r=>{if(d(r)){let e={src:r,then:(...t)=>f(r.then(...t))};return r.then(t=>e.value=t),e}else return typeof r?.then=="function"?r:{src:r?.src!==void 0?r.src:r,then:t=>{let n=f(t(r,!0));return n.value=n.src,n},value:r}},k=(r,e,t,n)=>f(r()).then((a,u)=>f(e(a)).then((o,i)=>o?f(n(a)).then((c,T)=>f(t(a)).then((l,I)=>{if(u&&i&&T&&I){let p=l;for(;e(p);)n(p),p=t(p);return p}else return new H("firstStateAfterEach","testBeforeEach","codeToExecute","afterEach",`
                    let state = firstStateAfterEach;
                    while (${i?"":"await "}testBeforeEach(state)) {
                      ${T?"":"await "}codeToExecute(state);
                      state = ${I?"":"await "}afterEach(state);
                    }
                    return state;
                  `)(l,e,n,t)})):a));function K(r,...e){return e.length===0?r:e.reduce((t,n)=>a=>n(t(a)),r)}function P(r,e,...t){return t.length===0?e(r):t.reduce((a,u)=>o=>u(a(o)),e)(r)}var A=function(r,e){return t=>{let n=0,a=e?.concurrency||1,u=new Set,o=async()=>{u.size>=a&&await Promise.race(u)},i=l=>{u.add(l),l.finally(()=>{u.delete(l)})},c=l=>{try{let I=r(l);return d(I)&&I.catch(p=>{if(n<1){try{t.throw?.(p)}catch{}n+=1}}),I}catch(I){if(n<1){try{t.throw?.(I)}catch{}n+=1}throw I}},T=t.next();if(d(T)){let l=T,I=async p=>{await o();let x=c(p);d(x)&&i(x)};return(async()=>{let p=await l;for(;!p.done;)await I(p.value),p=await t.next();await Promise.all(u),t.return?.(p.value)})()}else{let l=T;if(l.done)t.return?.(l.value);else{let I=c(l.value);if(d(I))return(async()=>{let p=I;for(;!l.done;){let x=p||c(l.value);p=void 0,i(x),l=t.next(),await o()}await Promise.all(u),t.return?.(l.value)})();for(l=t.next();!l.done;)c(l.value),l=t.next();t.return?.(l.value)}}}};function U(r){return r[Symbol.iterator]()}function z(r){return async function*(){for(let e of r)yield e}()}function S(r){return r[Symbol.iterator]?r[Symbol.iterator]():r[Symbol.asyncIterator]()}function g(r){return function*(){yield r}()}function q(r){return async function*(){yield r}()}function M(r){return S(r)}function ee(r){return async function*(){for(let e of r)yield e}()}function y(r){let e=[],t,n,a=()=>{for(n=new Promise(o=>{t=o}),e.push(n);r!==void 0&&e.length>r+1;)e.shift()};a();let u={[Symbol.asyncIterator]:()=>u,next:async()=>{if(e.length>0)return await e.shift();throw new Error("[itr8FromObservable] No elements in the buffer?")},push:o=>{t({value:o}),a()},done:()=>{t({done:!0}),a()}};return u}function oe(r){let e=y(1/0),t=setInterval(()=>{e.push(Date.now())},r),n=e.done;return e.done=()=>(clearInterval(t),n()),e}function ue(r,e,t){let n=t!==void 0?Math.abs(t):1,a=r<e;return function*(){if(a)for(let u=r;u<=e;u=u+n)yield u;else for(let u=r;u>=e;u=u-n)yield u}()}function ie(r,e,t){let n=t!==void 0?Math.abs(t):1,a=r<e;return async function*(){if(a)for(let u=r;u<=e;u=u+n)yield u;else for(let u=r;u>=e;u=u-n)yield u}()}function E(r){let e=r.next();if(d(e))return(async()=>{let t=[];for(;!(await e).done;)t.push((await e).value),e=r.next();return t})();{let t=[],n=e;for(;!n.done;)t.push(n.value),n=r.next();return t}}function Te(r){let e=r.next();if(d(e))return(async()=>{let t={};for(;!(await e).done;){let[n,a]=(await e).value;t[n]=a,e=r.next()}return t})();{let t={},n=e;for(;!n.done;){let[a,u]=n.value;t[a]=u,n=r.next()}return t}}function me(r){let e=r.next();if(d(e))return(async()=>{let t="";for(;!(await e).done;)t=t+(await e).value,e=r.next();return t})();{let t="",n=e;for(;!n.done;)t=t+n.value,n=r.next();return t}}var s=function(r,e){let t=(a,u)=>{let o={state:u,currentOutputIterator:void 0,isLastOutputIterator:!1,done:!1},i,c;function T(){i=a.next(),c===void 0&&(c=d(i))}let l,I,p=()=>{for(;;){if(o.done)return{value:void 0,done:!0};if(o.currentOutputIterator){let O=o.currentOutputIterator.next();if(I||d(O))return I=!0,x(!0,void 0,O);let v=O;if(v.done){if(o.currentOutputIterator=void 0,o.isLastOutputIterator)return o.done=!0,{done:!0,value:void 0}}else return v}if(T(),c)return x(!1);let m=r(i,o.state);if(l===void 0&&(l=d(m)),l)return x(!1,m);if("state"in m&&(o.state=m.state),m.done)return o.done=!0,{done:!0,value:void 0};if("value"in m)return m.isLast&&(o.done=!0),{done:!1,value:m.value};if("iterable"in m){if(o.currentOutputIterator!==void 0)throw new Error("currentOutputIterator should be undefined at this point");if(o.currentOutputIterator=S(m.iterable),o.isLastOutputIterator=!!m.isLast,o.currentOutputIterator?.next===void 0)throw new Error("Error while trying to get output iterator, did you specify something that is not an Iterable to the 'iterable' property? (when using a generator function, don't forget to call it in order to return an IterableIterator!)")}}},x=async(D=!0,m,O)=>{let v=D,N=m,C=O;for(;;){if(o.done)return{value:void 0,done:!0};if(o.currentOutputIterator){let h;C!==void 0?(h=C,C=void 0):h=o.currentOutputIterator.next();let F=d(h)?await h:h;if(F.done){if(o.currentOutputIterator=void 0,o.isLastOutputIterator)return o.done=!0,{done:!0,value:void 0}}else return F}v?T():v=!0;let G=await i,w;N!==void 0?(w=N,N=void 0):w=r(G,o.state),l===void 0&&(l=d(w));let b=l?await w:w;if("state"in b&&(o.state=b.state),b.done)return o.done=!0,{done:b.done,value:void 0};if("value"in b)return b.isLast&&(o.done=!0),{done:!1,value:b.value};if("iterable"in b){if(o.currentOutputIterator!==void 0)throw new Error("currentOutputIterator should be undefined at this point");if(o.currentOutputIterator=S(b.iterable),o.isLastOutputIterator=!!b.isLast,o.currentOutputIterator?.next===void 0)throw new Error("Error while trying to get output iterator, did you specify something that is not an Iterable to the 'iterable' property? (when using a generator function, don't forget to call it in order to return an IterableIterator!)")}}},R=()=>(c||l?R=x:R=p,R()),B={[Symbol.iterator]:()=>B,[Symbol.asyncIterator]:()=>B,next:()=>R()};return B},n=a=>t(a,e());return n.transNextFn=a=>{let u={state:e(),currentOutputIterator:void 0,isLastOutputIterator:!1,done:!1};if(a.done===!0)return a;if("iterable"in a){let o=a.iterable[Symbol.iterator]||a.iterable[Symbol.asyncIterator],i=[],c=k(()=>o.next(),T=>T.done!==!0,T=>o.next(),T=>{f(r(T,u.state)).then(l=>{u.state=l.state,l.done===!1&&l.iterable?i.push(...l.iterable):i.push(l.value)}).src});return f(c).then(T=>({done:!1,iterable:i})).src}else return"value"in a?f(r(a,u.state)).then(o=>{let{newState:i,...c}=o;return u.state=o.state,c}).src:a},n};var V=r=>s((e,t)=>e.done?{done:!0}:f(r(e.value)).then(n=>n?{done:!1,value:e.value}:{done:!0}).src,()=>{});function Re(r){let e=new Map,t=new Map;return{[Symbol.asyncIterator]:()=>{let a=()=>{let o=Math.min(...e.values());P(t.keys(),V(i=>i<o),A(i=>{t.delete(i)}))},u={[Symbol.asyncIterator]:()=>u,next:async()=>{let o=e.get(u);return t.has(o)||t.set(o,r.next()),a(),e.set(u,o+1),t.get(o)},return:async o=>(e.delete(u),a(),{done:!0,value:o}),throw:async o=>(e.delete(u),a(),{done:!0,value:void 0})};return e.set(u,t.size===0?0:Math.min(...t.keys())),u}}}var We=r=>e=>{let t={value:r},n,a=async()=>{let o;do d(o)&&await o,t=await e.next(),o=new Promise((i,c)=>{n=i});while(!t.done)},u={[Symbol.asyncIterator]:()=>u,next:async()=>(n===void 0?a():n(!0),t)};return u};var qe=r=>e=>{let t=[],n,a=async()=>{if(t.length<r){n&&t.length>0&&await t[0];let o=e.next();d(o)&&(n=!0,o.then(i=>{i.done||a()})),t.push(o)}},u={[Symbol.asyncIterator]:()=>u,[Symbol.iterator]:()=>u,next:()=>{if(a(),t.length>0){let[o,...i]=t;return t=i,a(),o}return n?Promise.resolve({done:!0,value:void 0}):{done:!0,value:void 0}}};return u};function et(r,e,...t){let n=t.reduce((a,u)=>o=>u(a(o)),e);return r.keepOrder===void 0||r.keepOrder?a=>{async function*u(){let o=y();(async()=>(await P(a,A(async i=>{let c={callbackIt:y(),subIt:y()};o.push(c);let T=n(g(i));await A(l=>{c.subIt.push(l)})(T),c.subIt.done(),await E(c.callbackIt)},{concurrency:r.concurrency})),o.done()))();for await(let i of o)yield*i.subIt,i.callbackIt.done()}return u()}:a=>{async function*u(){let o=y();(async()=>(await P(a,A(async i=>{let c=n(g(i));await A(l=>o.push({value:l}))(c);let T=y();o.push({callbackIt:T}),await E(T)},{concurrency:r.concurrency})),o.done()))();for await(let i of o)i.callbackIt===void 0?yield i.value:i.callbackIt.done()}return u()}}var it=r=>s((e,t)=>t.done?{done:!0}:e.done?{done:!1,value:!0,state:{done:!0}}:f(r(e.value)).then(n=>n?{done:!1,state:{done:!1}}:{done:!1,value:n,state:{done:!0}}).src,()=>({done:!1}));var dt=r=>s((e,t)=>t.done?{done:!0}:e.done?{done:!1,value:!1,state:{done:!0}}:f(r(e.value)).then(n=>n?{done:!1,value:n,state:{done:!0}}:{done:!1,state:{done:!1}}).src,()=>({done:!1}));var yt=r=>s((e,t)=>{if(e.done)return{done:!0};let n=r?r(e.value):e.value;return f(n).then(a=>a!==t?{done:!1,value:e.value,state:a}:{done:!1,state:a}).src},()=>{});var wt=r=>s((e,t)=>e.done?{done:!0}:f(r(e.value)).then(n=>n?{done:!1,value:e.value}:{done:!1}).src,()=>{});var St=()=>s((r,e)=>r.done?{done:!0}:{done:!1,iterable:r.value},()=>{});var Nt=r=>s((e,t)=>t.done||e.done&&t.buffer.length===0?{done:!0}:e.done?{done:!1,value:t.buffer,state:{done:!0,buffer:[]}}:t.buffer.length+1===r?{done:!1,value:[...t.buffer,e.value],state:{done:!1,buffer:[]}}:{done:!1,state:{...t,buffer:[...t.buffer,e.value]}},()=>({done:!1,buffer:[]}));var Et=r=>s((e,t)=>e.done?{done:!0}:t?{done:!1,iterable:[r,e.value],state:t}:{done:!1,iterable:[e.value],state:!0},()=>!1);var Mt=r=>s((e,t)=>e.done?{done:!0}:f(r(e.value)).then(n=>({done:!1,value:n})).src,()=>{});var Ht=(r=1,e=1)=>s((t,n)=>{if(t.done){if(n.next.length===0||r===0)return{done:!0,state:{current:Symbol.ITR8_NO_CURRENT,next:[],previous:n.previous}};{let[a,...u]=n.next,o={current:a,next:u||[],previous:[n.current,...n.previous].slice(0,e)};return{done:!1,value:{value:o.current,next:o.next,previous:o.previous},state:o}}}else{if(n.next.length<r)return{done:!1,state:{current:n.current,next:[...n.next,t.value].slice(0,r),previous:n.previous}};{let[a,...u]=n.next,i={current:r===0?t.value:a,next:[...u||[],t.value].slice(0,r),previous:(n.current===Symbol.ITR8_NO_CURRENT?n.previous:[n.current,...n.previous||[]]).slice(0,e)};return{done:!1,value:{value:i.current,next:i.next,previous:i.previous},state:i}}}},()=>({previous:[],current:Symbol.ITR8_NO_CURRENT,next:[]}));var Jt=(r,e)=>s((t,n)=>{if(n.done)return{done:!0};let a=n.accumulator;return t.done?{done:!1,value:a,state:{...n,done:!0}}:f(r(a,t.value,n.index)).then(u=>({done:!1,state:{...n,index:n.index+1,accumulator:u}})).src},()=>({index:0,accumulator:e,done:!1}));var zt=(r=2)=>s((e,{list:t,remaining:n})=>n<=0?{done:!0}:e.done?{done:!1,iterable:t,state:{list:t,remaining:n-1}}:{done:!1,value:e.value,state:{list:t.concat(e.value),remaining:n}},()=>({list:[],remaining:r-1}));var $t=(r=2)=>s((e,t)=>e.done?{done:!0}:{done:!1,iterable:function*(){for(let n=0;n<r;n++)yield e.value}()},()=>{});var Zt=(r,e)=>s((t,n)=>{if(n.done)return{done:!0};let a=n.index===0?e:n.accumulator;return t.done?{done:!0,value:a,state:n}:f(r(a,t.value,n.index)).then(u=>({done:!1,value:u,state:{...n,index:n.index+1,accumulator:u}})).src},()=>({index:0,accumulator:e}));var rr=(r=0)=>s((e,t)=>e.done?{done:!0}:t<r?{done:!1,state:t+1}:{done:!1,value:e.value},()=>0);var ur=r=>s((e,t)=>e.done?{done:!0}:t?f(r(e.value)).then((n,a)=>n?{done:!1,state:t}:{done:!1,value:e.value,state:!1}).src:{done:!1,value:e.value,state:!1},()=>!0);var lr=r=>s((e,t)=>t.done?{done:!0}:e.done?{done:!1,iterable:t.list.sort(r||void 0),state:{...t,done:!0}}:{done:!1,state:{...t,list:[...t.list,e.value]}},()=>({done:!1,list:[]}));var dr=r=>s((e,t)=>e.done?t===null?{done:!0}:{done:!1,value:t,state:null}:e.value===r?{done:!1,value:t||[],state:[]}:{done:!1,state:[...t===null?[]:t,e.value]},()=>null);var Ir=(r=1/0)=>s((e,t)=>{if(e.done)return{done:!0};if(t<r){let n=t+1;return{done:!1,value:e.value,state:n,isLast:n==r}}return{done:!0}},()=>0);var br=r=>s((e,t)=>{if(e.done)return{done:!0};try{r(e.value)}catch(n){console.warn("Tap function caused an exception",n,n.stack)}return{done:!1,value:e.value}},()=>{});var Or=()=>s((r,e)=>{if(r.done)return{done:!0};if(e.has(r.value))return{done:!1,state:e};let t=new Set(e);return t.add(r.value),{done:!1,value:r.value,state:t}},()=>new Set([]));var hr=r=>s((e,t)=>{if(e.done)return{done:!0};let n=r(e.value);if(t.has(n))return{done:!1,state:t};let a=new Set(t);return a.add(n),{done:!1,value:e.value,state:a}},()=>new Set([]));var Br=r=>s((e,t)=>e.done?{done:!0}:f(r.next()).then(n=>({done:!1,value:[e.value,n.value]})).src,()=>{});var en=()=>s((r,e)=>{if(e.done)return{done:!0};if(r.done)return{done:!1,value:e.sum/e.count,state:{...e,done:!0}};let t=e.count+1,n=e.sum+r.value;return{done:!1,state:{...e,count:t,sum:n}}},()=>({done:!1,count:0,sum:0}));var nn=()=>s((r,e)=>e.done?{done:!0}:r.done?{done:!1,value:e.max,state:{...e,done:!0}}:{done:!1,state:{...e,max:Math.max(e.max,r.value)}},()=>({done:!1,max:-1/0}));var un=()=>s((r,e)=>e.done?{done:!0}:r.done?{done:!1,value:e.min,state:{...e,done:!0}}:{done:!1,state:{...e,min:Math.min(e.min,r.value)}},()=>({done:!1,min:1/0}));var fn=r=>s((e,t)=>{if(t.done)return{done:!0};if(e.done)return{done:!1,value:t.topArray[0],state:{...t,done:!0}};let n=t.count+1,a=Math.floor((100-r)/100*n)+1,u=[...t.topArray,e.value];for(u.sort((o,i)=>o-i);a<u.length;)u.shift();return{done:!1,state:{...t,count:n,topArray:u}}},()=>({done:!1,count:0,topArray:[]}));var Tn=()=>s((r,e)=>{if(r.done)return{done:!0};let t=e.count+1,n=e.sum+r.value;return{done:!1,state:{...e,count:t,sum:n},value:n/t}},()=>({done:!1,count:0,sum:0}));var mn=r=>s((e,t)=>{if(e.done)return{done:!0};let n=t.count+1,a=Math.floor((100-r)/100*n)+1,u=[...t.topArray,e.value];for(u.sort((o,i)=>o-i);a<u.length;)u.shift();return{done:!1,state:{...t,count:n,topArray:u},value:u[0]}},()=>({count:0,topArray:[]}));var yn=()=>s((r,e)=>{if(r.done)return{done:!0};let t=e+r.value;return{done:!1,value:t,state:t}},()=>0);var vn=()=>s((r,e)=>e.done?{done:!0}:r.done?{done:!1,value:e.total,state:{...e,done:!0}}:{done:!1,state:{...e,total:e.total+r.value}},()=>({done:!1,total:0}));var Fn=(r=`
`)=>s((e,{done:t,buffer:n})=>{if(e.done)return t?{done:!0,state:{done:!0,buffer:""}}:{done:!1,value:n,state:{done:!0,buffer:""}};{let a=e.value.split(r);return a.length===1?{done:!1,state:{done:!1,buffer:n+a[0]}}:a.length===2?{done:!1,value:n+a[0],state:{done:!1,buffer:a[1]}}:{done:!1,iterable:[n+a[0],...a.slice(1,-1)],state:{done:!1,buffer:a[a.length-1]}}}},()=>({done:!1,buffer:""}));var Gn=()=>s((r,e)=>r.done?{done:!0}:{done:!1,iterable:M(r.value)},()=>{});var Un=r=>s((e,t)=>{if(e.done)return{done:!0};let n=Date.now();return n-t>r?{done:!1,value:e.value,state:n}:{done:!1,state:n}},()=>-1/0);var Wn=r=>s((e,t)=>new Promise(n=>{setTimeout(()=>n(e),r)}),()=>{});var qn=r=>s((e,t)=>{if(e.done)return{done:!0};let n=Date.now();return n-t>r?{done:!1,value:e.value,state:n}:{done:!1,state:t}},()=>-1/0);export{H as AsyncFunction,en as average,K as compose,Un as debounce,yt as dedup,Wn as delay,it as every,wt as filter,St as flatten,A as forEach,k as forLoop,Nt as groupPer,Et as intersperse,d as isPromise,U as itr8FromArray,z as itr8FromArrayAsync,S as itr8FromIterable,g as itr8FromSingleValue,q as itr8FromSingleValueAsync,M as itr8FromString,ee as itr8FromStringAsync,oe as itr8Interval,K as itr8Pipe,y as itr8Pushable,ue as itr8Range,ie as itr8RangeAsync,E as itr8ToArray,Re as itr8ToMultiIterable,Te as itr8ToObject,me as itr8ToString,Fn as lineByLine,Mt as map,nn as max,un as min,We as mostRecent,et as parallel,Ht as peek,fn as percentile,P as pipe,s as powerMap,qe as prefetch,Jt as reduce,zt as repeat,$t as repeatEach,Tn as runningAverage,mn as runningPercentile,Zt as runningReduce,yn as runningTotal,rr as skip,ur as skipWhile,dt as some,lr as sort,dr as split,Gn as stringToChar,Ir as take,V as takeWhile,br as tap,f as thenable,qn as throttle,vn as total,Or as uniq,hr as uniqBy,Br as zip};
//# sourceMappingURL=itr8.min.js.map
